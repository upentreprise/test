!function(o){function a(){o(document.body).addClass("sf-login-screen"),o(".sf-login-overlay").on("click",function(s){n(o(s.target))}),o(".sf-modal-close").on("click",function(s){n(null)})}function n(s){(null===s||!s.closest(".sf-login-modal").length&&o(".sf-login-modal").is(":visible"))&&(o(document.body).removeClass("sf-login-screen"),o(".sf-login-overlay").off("click","**"),o(".sf-modal-close").off("click","**"))}function e(s){var a=!1;return s.find(".validate").each(function(){var s=o(this);""===s.val()?(s.addClass("invalid"),a=!0):s.removeClass("invalid")}),a&&s.find(".sf-form-message").html('<span class="error">'+sf_login_data.required_fields+"</span>"),!a}function t(n,s){var e=n.find(".sf-form-message"),t=n.siblings(".preloader");t.length&&t.show(),e.empty(),n.find(".invalid").removeClass("invalid"),o.ajax({type:"POST",dataType:"json",url:sf_login_data.ajax_url,data:s,success:function(s){if(t.length&&t.hide(),s)if(e.html(s.data.message),s.success)s.data.redirect_url?window.location=s.data.redirect_url:s.data.refresh?window.location.reload():s.data.delayed_refresh?setTimeout(function(){window.location.reload()},1e3):(n[0].reset(),n.addClass("sf-ajax-success"));else if(s.data.fields)for(i in s.data.fields){var a=s.data.fields[i];n.find(a).addClass("invalid")}},error:function(s,a){}})}o(document).ready(function(){o(document.body).on("click",".sf-ajax-login",function(s){s.preventDefault(),a(),o(".sf-login-tab").click()}).on("click",".sf-ajax-register",function(){a(),o(".sf-register-tab").click()}).on("click",".sf-login-tabs a",function(){var s=o(this),a=s.parents(".sf-login-wrapper"),n="sf-login-wrapper "+s.data("form")+"-active";a.attr("class",n),s.siblings().removeClass("active"),s.addClass("active")}).on("click",".sf-lost-password",function(s){s.preventDefault(),o(this).parents(".sf-login-wrapper").find(".sf-lost-tab").click()}).on("keyup",function(s){27==s.keyCode&&n(null)}).on("submit",".sf-login-form",function(s){s.preventDefault();var a=o(this);if(e(a)){var n={action:"sf_ajax_login",username:a.find(".sf-username").val(),password:a.find(".sf-password").val(),remember:a.find(".sf-rememberme").val(),security:a.find(".sf-login-nonce").val()};t(a,n)}}).on("submit",".sf-register-form",function(s){s.preventDefault();var a=o(this);if(e(a)){var n={action:"sf_ajax_register",username:a.find(".sf-username").val(),email:a.find(".sf-email").val(),firstname:a.find(".sf-firstname").val(),lastname:a.find(".sf-lastname").val(),password:a.find(".sf-password").val(),security:a.find(".sf-register-nonce").val()};t(a,n)}}).on("submit",".sf-lost-password-form",function(s){s.preventDefault();var a=o(this);if(e(a)){var n={action:"sf_ajax_lost_password",user_login:a.find(".sf-user-login").val(),security:a.find(".sf-lost-password-nonce").val()};t(a,n)}}).on("change",".sf-form-row input[type=text],.sf-form-row input[type=email],.sf-form-row input[type=password]",function(){o(this).removeClass("invalid")}).on("click",".sf-resend-link",function(s){s.preventDefault(),o.ajax({type:"POST",dataType:"json",url:sf_login_data.ajax_url,data:{action:"sf_ajax_resend_link",user_login:o(this).data("user"),security:o(this).data("nonce")},success:function(s){s.success&&o(this).attr("disabled","disabled")}})}),o(".sf-login-tab").click()})}(jQuery);