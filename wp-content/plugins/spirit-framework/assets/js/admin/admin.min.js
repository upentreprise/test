!function(d){"use strict";function e(){d("#widgets-right select.sf-js-select:not(.selectized)").each(function(e){var s=d(this);s.selectize({plugins:["remove_button"],allowEmptyOption:!1,maxItems:null,onChange:function(e){null==e?s.siblings("input").val(""):s.siblings("input").val(e)}})}),setTimeout(function(){d("#widgets-right").find(".sf-input-iconpicker").fontIconPicker({source:SF_Fonts,theme:"fip-bootstrap"})},1400)}var i,s=(d(window),d(document));e(),s.on("widget-added widget-updated",function(){e()}),s.on("click",".sf-btn-upload-image,.sf-btn-edit-image,.sf-media-preview img",function(e){return e.preventDefault(),d(this).parents(".sf-media-upload").addClass("active"),i||(i=wp.media({multiple:!1,library:{type:"image"}})).on("select",function(){var e=d(".sf-media-upload.active"),s=i.state().get("selection").first().toJSON(),t=e.find(".sf-media-preview img");s&&(e.find("input").val(s.url).trigger("change"),void 0!==t&&t.length?t.attr("src",s.url).show():e.find(".sf-media-preview").append('<img src="'+s.url+'">'),e.removeClass("active"),e.find(".sf-media-btns").addClass("selected"))}),void i.open()}),s.on("click",".sf-btn-remove-image",function(e){e.preventDefault();var s=d(this),t=d(this).parents(".sf-media-upload");s.parent().siblings("input").val("").trigger("change"),t.find(".sf-media-preview").empty(),s.parent().removeClass("selected")}),d(".rwmb-meta-box .sf-input-iconpicker").fontIconPicker({source:SF_Fonts,theme:"fip-bootstrap"});var t=d("#sf-admin-wrap");t.imagesLoaded(function(){t.show()});var n=t.find("#sf-theme-activation-form"),a=t.find("p.sf-theme-message"),o=n.find("#sf-api-key"),r=n.find(".spinner");n.on("submit",function(e){e.preventDefault(),r.css("visibility","visible"),d.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"sf_activate_theme",api_key:o.val()},error:function(e,s){console.log(e),console.log(s)},success:function(e){r.css("visibility","hidden"),e.key_exist||(e.activated?n.parent().removeClass("sf-theme-error").addClass("sf-theme-activated"):n.parent().removeClass("sf-theme-activated").addClass("sf-theme-error"),a.html(e.message))}})}),d(document).on("show.bs.modal",".sf-demo-modal",function(){d(this).after('<div class="modal-backdrop show"></div>')}).on("hide.bs.modal",".sf-demo-modal",function(){d(this).siblings(".modal-backdrop").remove()}),d(".sf-demo-content").on("change",function(){0===d(this).find(":checked").length?d(this).closest(".sf-demo-form").addClass("sf-demo-content-none"):d(this).closest(".sf-demo-form").removeClass("sf-demo-content-none")}),d(".sf-demo-content input").on("click",function(){var e=d(this),s=e.closest(".sf-demo-content"),t=s.find('input[value="all"]'),i=s.find("input").filter(function(){return"all"!=d(this).attr("value")&&!d(this).attr("disabled")}),n=i.filter(":checked").length===i.length;"all"==e.attr("value")?e.is(":checked")?i.attr("checked","checked"):i.removeAttr("checked"):!0==n?t.attr("checked","checked"):t.removeAttr("checked")}),d(document.body).on("submit",".sf-demo-form",function(e){e.preventDefault();var s=d(this),t=s.parents(".sf-demo-item"),i=t.siblings(),n=t.find(".sf-progress-bar"),a=confirm(SF_L10n.install_demo),o=null;!0===a&&d.ajax({type:"POST",url:ajaxurl,data:{action:"sf_demo_installer",demo_action:"install",demo_id:s.data("demo-id"),demo_data:s.serialize()},beforeSend:function(){s.find('.sf-demo-content input[type="checkbox"]:checked').attr("disabled","disabled"),t.removeClass("sf-demo-installed").addClass("sf-demo-installing"),i.removeClass("sf-demo-installed").addClass("sf-demo-disabled"),l.init(n,90),o=setInterval(function(){l.updateStep(10)},2e3)},success:function(e){t.removeClass("sf-demo-installing").addClass("sf-demo-installed"),i.removeClass("sf-demo-disabled"),clearInterval(o),l.complete(),s.find('input[value="all"]').is(":checked")&&s.find(".sf-button-install").hide(),i.find(".sf-button-install").show(),setTimeout(function(){t.removeClass("sf-demo-uninstalling"),i.removeClass("sf-demo-disabled"),l.reset()},200)},error:function(e,s,t){console.log(e),console.log(s),console.log(t)}})}),d(document.body).on("click",".sf-demo-form .sf-button-uninstall",function(e){e.preventDefault();var s=d(this).parents(".sf-demo-item"),t=s.siblings(),i=s.find(".sf-progress-bar"),n=null;!0===confirm(SF_L10n.uninstall_demo)&&d.ajax({type:"POST",url:ajaxurl,data:{action:"sf_demo_installer",demo_action:"uninstall"},beforeSend:function(){s.removeClass("sf-demo-installed").addClass("sf-demo-uninstalling"),t.addClass("sf-demo-disabled"),l.init(i,90),n=setInterval(function(){l.updateStep(10)},2e3)},success:function(e){d('.sf-demo-content input[type="checkbox"]').removeAttr("disabled"),clearInterval(n),l.complete(),setTimeout(function(){s.removeClass("sf-demo-uninstalling"),t.removeClass("sf-demo-disabled"),s.find(".sf-button-install").show(),l.reset()},200)}})});var l={init:function(e,s){this.bar=e,this.percent=0,this.previous=s||90},updateStep:function(e){this.percent>this.previous&&(this.percent=this.previous),this.percent<this.previous&&(this.percent+=e,this.bar.css("width",this.percent+"%"))},updatePercent:function(e){e==this.previous&&(this.previous+=20,this.percent=e,this.bar.css("width",this.percent+"%"))},complete:function(){this.bar.css("width","100%")},reset:function(){this.bar.css("width","0")}},c=d("#widgets-right"),f=d("#sf-new-sidebar-form"),m=d("#sf-sidebar-message");d("#sf-custom-sidebars").insertBefore(c).show(),c.find(".sidebar-sf-custom-sidebar").each(function(){var e=d(this),s='[sf_sidebar id="'+e.find(">.widgets-sortables").attr("id")+'"]';e.append('<div class="textright"><div class="sf-sidebar-shortcode">'+s+'</div><span class="sf-remove-sidebar dashicons dashicons-trash"></span><div class="clear"></div></div>')}),f.on("submit",function(e){e.preventDefault();var s=f.find("#sf-sidebar-name"),t=f.find("#sf-sidebar-desc"),i=f.find("#sf-sidebar-nonce"),n=f.find(">.spinner");d.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"sf_add_sidebar",sidebar_name:s.val(),sidebar_desc:t.val(),sidebar_nonce:i.val()},beforeSend:function(){n.addClass("is-active")},success:function(e){e&&(m.html(e.message),!0===e.success&&location.reload(),setTimeout(function(){m.empty()},2e3)),n.removeClass("is-active")}})}),c.on("click","span.sf-remove-sidebar",function(e){e.preventDefault();var s=d(this).parents(".widgets-holder-wrap"),t=s.find(">.widgets-sortables").attr("id"),i=s.find(".sidebar-name .spinner"),n=d("#sf-sidebar-nonce"),a=confirm(SF_L10n.remove_sidebar);t&&a&&d.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"sf_remove_sidebar",sidebar_id:t,sidebar_nonce:n.val()},beforeSend:function(){i.addClass("is-active")},success:function(e){e&&(!0===e.success?(s.remove(),wpWidgets.saveOrder()):(m.html(e.message),setTimeout(function(){m.empty()},2e3)))}})}),d("#sf-settings-page .sf-select-single").selectize({dropdownParent:"body",allowEmptyOption:d(this).hasClass("allow-empty")}),d(document.body).on("init_tooltips",function(){d(".sf-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}),d(document.body).trigger("init_tooltips"),d(document).on("click",".row-actions .sf_action",function(){if(confirm(SF_L10n.user_confirmation)){var e=d(this).attr("user_id"),s=d(this).attr("do");$.ajax({type:"POST",context:this,url:ajaxurl,data:{action:"sf_ajax_approve_user",user_id:e,do:s},beforeSend:function(){d(this).parent().siblings(".sf_status").html(SF_L10n.user_updating)},success:function(e){"approve"==s&&(d(this).text(SF_L10n.user_remove_approval),d(this).attr("do","remove_approval"),d(this).removeClass("sf_approve"),d(this).addClass("sf_remove_approval")),"remove_approval"==s&&(d(this).text(SF_L10n.user_approve),d(this).attr("do","approve"),d(this).removeClass("sf_remove_approval"),d(this).addClass("sf_approve")),0<e.length&&d(this).parent().siblings(".sf_status").html(e)}})}})}(jQuery);