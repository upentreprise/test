!function(c){"use strict";var a=c(document);a.ready(function(){function i(s){var t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family="+s,t.type="text/css",c("head").append(t)}function o(){c("#sf-custom-fonts").find(".sf-font-list").children().length?c("#sf-custom-fonts").show():c("#sf-custom-fonts").hide()}o();var e=c("#sf-google-fonts .sf-font-list");e.find(".sf-fi-A").show(),c("#sf-font-filter a").eq(0).addClass("active"),c("#sf-font-filter a").on("click",function(){var s=c(this),t=s.html();s.addClass("active").siblings().removeClass("active"),e.children().hide(),e.find(".sf-fi-"+t).show()});var s=c("#sf-font-preview>li"),t=c("#sf-font-details>li");c('span.sf-font-family[data-source="Google"]').each(function(){var s=c(this).html();i(s=s.replace("/s/","+"))}),s.eq(0).addClass("active"),t.eq(0).show(),a.on("click","#sf-font-preview>li",function(){var s=c(this),t=s.parent().children().index(s);s.addClass("active").siblings().removeClass("active"),c("#sf-font-details>li").eq(t).show().siblings().hide()}).on("click",".sf-font-variant-subset label",function(){var s=c(this).find("input");s.is(":checked")?s.attr("checked",""):s.attr("checked")});var n=!1;a.on("click","a.sf-add-font",function(s){if(s.preventDefault(),n)return!1;n=!0;var t=c(this),e=t.parent().siblings("span").html(),a=!1;return c("h2.sf-font-family").each(function(){e==c(this).html()&&(n=a=!0)}),a?n=!1:void(t.parents("#sf-custom-fonts").length?c.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"sf_add_font",source:"custom",font_family:e},success:function(s){s&&(c("#sf-font-preview").append(s.preview),c("#sf-font-details").append(s.details),c("#sf-font-preview>li").last().addClass("active").siblings().removeClass("active"),c("#sf-font-details>li").last().show().siblings().hide()),n=!1}}):c.ajax({type:"POST",url:ajaxurl,data:{action:"sf_add_font",source:"google",font_family:e},success:function(s){s&&(c("#sf-font-preview").append('<li><span class="sf-font-specimen" style="font-family:'+e+'">Grumpy wizards make toxic brew for the evil Queen and Jack.</span><span class="sf-font-family">'+e+'</span><a href="javascript:void(0)" class="sf-remove-font">X</a></li>'),c("#sf-font-details").append(s),i(e=e.replace("/s/","+")),c("#sf-font-preview>li").last().addClass("active").siblings().removeClass("active"),c("#sf-font-details>li").last().show().siblings().hide()),n=!1}}))}).on("click","a.sf-remove-font",function(){var s=c(this),t=s.parents("#sf-font-preview").children().index(s.parent());s.parent().remove(),c("#sf-font-details>li").eq(t).remove(),c("#sf-font-details>li").eq(0).show(),c("#sf-font-preview>li").eq(0).addClass("active").siblings().removeClass("active")}),c("a.sf-save-fonts").on("click",function(){var f={},t=c(this).siblings(".spinner"),e=c(this).siblings(".sf-form-message");t.css("visibility","visible"),e.hide(),c("#sf-font-details>li").each(function(s){var t=c(this),e={},a=t.find("h2.sf-font-family").html(),i=t.find("input.sf-check-variant"),n=0;e.family=a,e.source="",e.variants="",t.find("div.sf-font-source:contains(Google)").length?e.source="Google":e.source="Custom","Google"==e.source&&i.each(function(s){var t=c(this);(t.is(":checked")||t.is(":disabled"))&&(e.variants=0==n?t.data("variant"):e.variants+","+t.data("variant"),n++)}),f[s]=e}),c.ajax({type:"POST",url:ajaxurl,data:{action:"sf_save_fonts",fontData:f},success:function(s){t.css("visibility","hidden"),e.html(s).fadeIn()}})});var l={};c("input.sf-upload-submit").on("click",function(){c(this).siblings(":file").click()}),c("input.sf-upload-remove").on("click",function(){c(this).siblings(":file").val("").trigger("change"),c(this).parent().prev("span").html("")}),c("input.sf-ff").on("change",function(s){var t=c(this),e=t.parent().prev("span"),a=(t[0].type,t.val().replace(/\\/g,"/").replace(/.*\//,""));switch(t.attr("id")){case"sf-ff-woff":l.woff=s.target.files;break;case"sf-ff-ttf":l.ttf=s.target.files;break;case"sf-ff-eot":l.eot=s.target.files;break;case"sf-ff-svg":l.svg=s.target.files;break;case"sf-ff-woff2":l.woff2=s.target.files}""!==a&&e.html(a)}),c("#sf-form-custom-font").on("submit",function(s){s.preventDefault();var t=c(this),e=new FormData,a=t.find("#sf-custom-font-name").val(),i=t.find("#sf-save-cf-nonce").val(),n=t.prev(".sf-form-message"),f=t.find("div.spinner");e.append("action","sf_save_custom_font"),e.append("font_name",a),e.append("security",i),c.each(l,function(s,t){e.append(s,t[0])}),f.css("visibility","visible"),c.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",cache:!1,processData:!1,contentType:!1,success:function(s){f.css("visibility","hidden"),void 0!==s.error&&n.html(s.error),void 0!==s.success&&(n.html(s.success),l={},c("#sf-custom-fonts .sf-font-list").append("<li><span>"+a+'</span><div class="sf-font-actions"><a href="javascript:void(0)" class="sf-add-font">+</a><a href="javascript:void(0)" class="sf-remove-custom-font">&ndash;</a></div></li>'),c("input.sf-upload-remove").trigger("click"),t.find("#sf-custom-font-name").val("")),o()}})}),a.on("click","a.sf-remove-custom-font",function(){var t=c(this),e=t.parent().siblings("span").html();c.ajax({type:"POST",url:ajaxurl,data:{action:"sf_remove_custom_font",font_name:e},success:function(s){t.parents("li").remove(),c("span.sf-font-family:contains("+e+")").parents("li").remove(),c("h2.sf-font-family:contains("+e+")").parents("li").remove(),c("#sf-font-preview>li").first().addClass("active").siblings().removeClass("active"),c("#sf-font-details>li").first().show().siblings().hide(),o()},error:function(s,t){console.log(s),console.log(t)}})})})}(jQuery);